<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœˆå…”è½‰è›‹æ¨¡æ“¬å™¨</title>
    <!-- ä½¿ç”¨ Tailwind CSS åŠ é€Ÿé–‹ç™¼ï¼Œç¢ºä¿ç¾è§€ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
    </style>
</head>
<body class="bg-gray-100 p-8 flex items-center justify-center min-h-screen">

    <div class="bg-white p-8 rounded-2xl shadow-2xl w-full max-w-4xl border border-gray-200">
        <h1 class="text-4xl font-extrabold text-gray-900 mb-6 text-center">æœˆå…”è½‰è›‹æ¨¡æ“¬å™¨</h1>
        <p class="text-sm text-gray-500 mb-8 text-center">
            æ©Ÿç‡æ•¸æ“šä¾†è‡ªæ‚¨æä¾›çš„åœ–ç‰‡ï¼Œæ¯æŠ½ç¨ç«‹éš¨æ©Ÿã€‚
        </p>

        <!-- æŠ½çæ§åˆ¶å€å¡Š -->
        <div class="mb-8 flex flex-col sm:flex-row justify-center items-center gap-4">
            <div class="flex items-center space-x-2">
                <label for="draw-count" class="font-medium text-gray-700">é¸æ“‡æŠ½çæ¬¡æ•¸ï¼š</label>
                <select id="draw-count" class="p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500">
                    <option value="1">å–®æŠ½ (1æ¬¡)</option>
                    <option value="10" selected>10æŠ½</option>
                    <option value="50">50æŠ½</option>
                    <option value="100">100æŠ½</option>
                    <option value="1000">1000æŠ½</option>
                    <option value="10000">10000æŠ½</option>
                </select>
            </div>
            <button id="draw-button" class="px-6 py-3 bg-blue-600 text-white font-bold rounded-lg shadow-lg hover:bg-blue-700 transition-colors duration-200 transform hover:scale-105">
                é–‹å§‹æŠ½ç
            </button>
        </div>

        <!-- ç¸½è¨ˆå€å¡Š -->
        <div class="bg-gray-50 p-6 rounded-xl border border-gray-200 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ç¸½è¨ˆçµæœ</h2>
            <div id="total-results" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm text-gray-700">
                <!-- ç¸½è¨ˆçµæœå°‡å‹•æ…‹ç”Ÿæˆåœ¨æ­¤ -->
            </div>
            <p id="total-draws-count" class="text-lg font-semibold text-gray-900 mt-4 text-center">ç¸½è¨ˆæŠ½çæ¬¡æ•¸ï¼š0</p>
        </div>

        <!-- æ­·å²ç´€éŒ„å€å¡Š -->
        <div class="bg-gray-50 p-6 rounded-xl border border-gray-200">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 flex justify-between items-center">
                æœ¬æ¬¡æŠ½ççµæœ
                <button id="clear-button" class="text-sm text-red-500 hover:text-red-700 transition-colors duration-200">æ¸…é™¤</button>
            </h2>
            <div id="latest-results" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm text-gray-700">
                <!-- æœ¬æ¬¡æŠ½ççµæœå°‡å‹•æ…‹ç”Ÿæˆåœ¨æ­¤ -->
                <p id="latest-message" class="col-span-full text-center text-gray-400">è«‹é»æ“Šã€Œé–‹å§‹æŠ½çã€æŒ‰éˆ•</p>
            </div>
        </div>

        <!-- æ–°å¢çš„åˆ†äº«æ•™å­¸å€å¡Š -->
        <div class="bg-blue-50 p-6 rounded-xl border border-blue-200 mt-8">
            <h2 class="text-xl font-bold text-blue-800 mb-3">ğŸš€ å¦‚ä½•åˆ†äº«çµ¦æœ‹å‹ï¼ˆè£½ä½œå¯åˆ†äº«çš„ç¶²å€ï¼‰</h2>
            <p class="text-gray-700 mb-3">è¦è®“é€™å€‹æ¨¡æ“¬å™¨æ“æœ‰ç¨ç«‹çš„ç¶²å€ï¼Œä½ éœ€è¦å°‡ç¨‹å¼ç¢¼ä¸Šå‚³åˆ°ä¸€å€‹ç¶²é è¨—ç®¡æœå‹™ã€‚</p>
            <ol class="list-decimal list-inside text-gray-700 space-y-4">
                <li>
                    **ä½¿ç”¨ GitHub Pages (æ¨è–¦)**
                    <ul class="list-disc list-inside ml-5 mt-2 space-y-1">
                        <li>å‰å¾€ <a href="https://github.com" class="text-blue-600 underline hover:text-blue-800">GitHub.com</a> ä¸¦è¨»å†Š/ç™»å…¥ã€‚</li>
                        <li>å»ºç«‹ä¸€å€‹æ–°çš„å€‰åº«ï¼ˆrepositoryï¼‰ï¼Œä¸¦çµ¦å®ƒä¸€å€‹åç¨±ã€‚</li>
                        <li>å°‡æœ¬ç¨‹å¼ç¢¼å€å¡Šä¸­çš„æ‰€æœ‰å…§å®¹ï¼Œå¾ `<!DOCTYPE html>` åˆ° `</html>`ï¼Œè¤‡è£½åˆ°ä¸€å€‹åç‚º `index.html` çš„æ–°æª”æ¡ˆä¸­ã€‚</li>
                        <li>å°‡é€™å€‹æª”æ¡ˆä¸Šå‚³åˆ°ä½ å‰›å»ºç«‹çš„å€‰åº«ä¸­ã€‚</li>
                        <li>åœ¨å€‰åº«çš„ã€ŒSettingsã€ä¸­ï¼Œæ‰¾åˆ°ã€ŒPagesã€é¸é …ï¼Œå°‡ä¾†æºè¨­å®šç‚º `main` åˆ†æ”¯ã€‚</li>
                        <li>GitHub Pages æœƒè‡ªå‹•ç‚ºä½ å»ºç«‹ä¸€å€‹å…¬é–‹çš„ç¶²å€ï¼Œä¾‹å¦‚ï¼š`https://ä½ çš„ç”¨æˆ¶å.github.io/ä½ çš„å€‰åº«å/`ã€‚ä½ å°±å¯ä»¥åˆ†äº«é€™å€‹é€£çµäº†ï¼</li>
                    </ul>
                </li>
                <li>
                    **ä½¿ç”¨ Glitch.com**
                    <ul class="list-disc list-inside ml-5 mt-2 space-y-1">
                        <li>å‰å¾€ <a href="https://glitch.com" class="text-blue-600 underline hover:text-blue-800">Glitch.com</a>ã€‚</li>
                        <li>é»æ“Šã€ŒNew Projectã€ä¸¦é¸æ“‡ã€ŒHello Webpageã€ã€‚</li>
                        <li>å°‡é è¨­çš„ `index.html` å…§å®¹æ›¿æ›æˆä½ è¤‡è£½çš„ç¨‹å¼ç¢¼ã€‚</li>
                        <li>Glitch æœƒè‡ªå‹•ç‚ºä½ çš„å°ˆæ¡ˆç”Ÿæˆä¸€å€‹ç¶²å€ï¼Œä½ å¯ä»¥é»æ“Šå·¦ä¸Šè§’çš„ã€ŒShareã€ä¾†æ‰¾åˆ°å®ƒã€‚</li>
                    </ul>
                </li>
                <li>
                    **é›¢ç·šåˆ†äº«ï¼ˆä¸éœ€ç¶²å€ï¼‰**
                    <ul class="list-disc list-inside ml-5 mt-2 space-y-1">
                        <li>å¦‚æœåªæƒ³é›¢ç·šåˆ†äº«ï¼Œè«‹åƒç…§ä¸Šä¸€ç‰ˆçš„æ•™å­¸ï¼šå°‡ç¨‹å¼ç¢¼è¤‡è£½ä¸¦å„²å­˜ç‚º `.html` æª”æ¡ˆï¼Œç„¶å¾Œå°‡æª”æ¡ˆç›´æ¥å‚³é€çµ¦ä½ çš„æœ‹å‹ã€‚</li>
                    </ul>
                </li>
            </ol>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const drawButton = document.getElementById('draw-button');
            const drawCountSelect = document.getElementById('draw-count');
            const latestResultsContainer = document.getElementById('latest-results');
            const totalResultsContainer = document.getElementById('total-results');
            const totalDrawsCountElement = document.getElementById('total-draws-count');
            const clearButton = document.getElementById('clear-button');

            let totalDraws = 0;
            let totalCounts = {};

            const gachaRates = {
                // æ©Ÿç‡ä»¥ç™¾åˆ†æ¯”è¡¨ç¤º
                "(æŸ“)æœˆå…”æ­¦å™¨(3D)éš¨æ©Ÿç®±": 20.00,
                "(æŸ“)æœˆå…”æ­¦å™¨(7D)éš¨æ©Ÿç®±": 15.00,
                "(æŸ“)æœˆå…”æ­¦å™¨(15D)éš¨æ©Ÿç®±": 10.00,
                "(æŸ“)æœˆå…”æ­¦å™¨(30D)éš¨æ©Ÿç®±": 5.00,
                "(æŸ“)æœˆå…”æ­¦å™¨(45D)éš¨æ©Ÿç®±": 2.00,
                "(æŸ“)æœˆå…”æ­¦å™¨(æ°¸ä¹…)éš¨æ©Ÿç®±": 0.50,
                "(æŸ“)æœˆå…”æ­¦å™¨(æ°¸ä¹…)å…¨å¥—ç¦®ç›’": 0.01,
                "æœˆå…”çš„é­”å’’(æ°¸ä¹…)": 0.50,
                "é«˜ç´šè£œå……åŠ‘(999ç“¶è£)": 6.00,
                "çš‡å®¶å¯µç‰©é¤…ä¹¾ç¦®ç›’(10T)": 9.00,
                "é»ƒé‡‘æ§Œ": 7.00,
                "å…ƒç´ ç ”ç£¨é˜²çˆ†è€³ç’°": 10.00,
                "å…ƒç´ ç ”ç£¨å®ˆè­·è€³ç’°": 10.00,
                "å®ˆè­·æ–¹é™£": 5.00
            };

            const items = Object.keys(gachaRates);
            const weights = Object.values(gachaRates);

            const specialItems = ["(æŸ“)æœˆå…”æ­¦å™¨(æ°¸ä¹…)éš¨æ©Ÿç®±", "(æŸ“)æœˆå…”æ­¦å™¨(æ°¸ä¹…)å…¨å¥—ç¦®ç›’", "æœˆå…”çš„é­”å’’(æ°¸ä¹…)"];

            // åˆå§‹åŒ–ç¸½è¨ˆçµæœ
            function initializeTotalCounts() {
                totalCounts = {};
                for (const item of items) {
                    totalCounts[item] = 0;
                }
                updateTotalDisplay();
            }

            // æ›´æ–°ç¸½è¨ˆçµæœçš„é¡¯ç¤º
            function updateTotalDisplay() {
                totalResultsContainer.innerHTML = '';
                for (const item of items) {
                    const count = totalCounts[item];
                    const element = document.createElement('div');
                    element.className = 'p-3 bg-white rounded-lg border border-gray-200 shadow-sm transition-all duration-200 hover:shadow-md';
                    
                    const isSpecial = specialItems.includes(item);
                    
                    element.innerHTML = `
                        <p class="font-medium ${isSpecial ? 'text-red-600 font-bold' : 'text-gray-800'}">${item}</p>
                        <p class="text-sm text-gray-600 mt-1">æ•¸é‡ï¼š<span class="font-semibold text-lg">${count}</span></p>
                    `;
                    totalResultsContainer.appendChild(element);
                }
                totalDrawsCountElement.textContent = `ç¸½è¨ˆæŠ½çæ¬¡æ•¸ï¼š${totalDraws}`;
            }

            // åŸ·è¡ŒæŠ½ç
            function performDraw(count) {
                let currentDraws = {};
                
                // åŸ·è¡Œéš¨æ©ŸæŠ½ç
                for (let i = 0; i < count; i++) {
                    const chosenItem = randomChoice(items, weights);
                    if (!currentDraws[chosenItem]) {
                        currentDraws[chosenItem] = 0;
                    }
                    if (!totalCounts[chosenItem]) {
                        totalCounts[chosenItem] = 0;
                    }
                    currentDraws[chosenItem]++;
                    totalCounts[chosenItem]++;
                    totalDraws++;
                }
                
                return currentDraws;
            }

            // éš¨æ©Ÿé¸æ“‡å‡½å¼
            function randomChoice(list, weights) {
                const totalWeight = weights.reduce((sum, w) => sum + w, 0);
                let randomNum = Math.random() * totalWeight;

                for (let i = 0; i < list.length; i++) {
                    randomNum -= weights[i];
                    if (randomNum <= 0) {
                        return list[i];
                    }
                }
                return list[list.length - 1]; // Fallback
            }

            // æ¸²æŸ“æœ€æ–°çš„æŠ½ççµæœ
            function renderLatestResults(results) {
                latestResultsContainer.innerHTML = '';
                if (Object.keys(results).length === 0) {
                    latestResultsContainer.innerHTML = `<p id="latest-message" class="col-span-full text-center text-gray-400">æœ¬æ¬¡æŠ½çæ²’æœ‰çµæœ</p>`;
                    return;
                }

                for (const item in results) {
                    const count = results[item];
                    const isSpecial = specialItems.includes(item);
                    const element = document.createElement('div');
                    element.className = 'p-3 bg-white rounded-lg border border-gray-200 shadow-sm transition-all duration-200 hover:shadow-md';
                    
                    let message = '';
                    if (isSpecial) {
                        message = `<p class="text-red-600 font-bold text-lg animate-pulse">æ­å–œï¼</p>`;
                    }

                    element.innerHTML = `
                        ${message}
                        <p class="font-medium ${isSpecial ? 'text-red-600 font-bold' : 'text-gray-800'}">${item}</p>
                        <p class="text-sm text-gray-600 mt-1">æ•¸é‡ï¼š<span class="font-semibold text-lg">${count}</span></p>
                    `;
                    latestResultsContainer.appendChild(element);
                }
            }

            // æŠ½çæŒ‰éˆ•é»æ“Šäº‹ä»¶
            drawButton.addEventListener('click', () => {
                const count = parseInt(drawCountSelect.value, 10);
                const results = performDraw(count);
                renderLatestResults(results);
                updateTotalDisplay();
            });

            // æ¸…é™¤æŒ‰éˆ•é»æ“Šäº‹ä»¶
            clearButton.addEventListener('click', () => {
                totalDraws = 0;
                initializeTotalCounts();
                latestResultsContainer.innerHTML = `<p id="latest-message" class="col-span-full text-center text-gray-400">è«‹é»æ“Šã€Œé–‹å§‹æŠ½çã€æŒ‰éˆ•</p>`;
            });

            // åˆå§‹é¡¯ç¤º
            initializeTotalCounts();
        });
    </script>
</body>
</html>
